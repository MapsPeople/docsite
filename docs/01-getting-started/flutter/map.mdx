---
title: Show a Map
hide_title: false
hide_table_of_contents: true
sidebar_position: 4
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

Your environment is now fully configured, and you have the necessary map platform and MapsIndoors API keys. Next you will learn how to load a map with MapsIndoors.

## Show a Map with MapsIndoors

:::tip async

Please note that data in MapsIndoors is loaded asynchronously. This results in behavior where data might not have finished loading if you call methods accessing it immediately after initializing MapsIndoors. Best practice is to set up `listeners` or `delegates` to inform of when data is ready. Please be aware of this when developing using the MapsIndoors SDK.

:::

### Initialize MapsIndoors

We start by loading `MapsIndoors`. `MapsIndoors` is used to get and store all references to MapsIndoors-specific data. This includes access to all MapsIndoors-specific geodata.

Place the following initialization code in the `initState` method of your apps `State` that displays the Google map, Ensure that the `loadMapsIndoors` callback returns before accessing other `MapsIndoors` methods.

```dart
@override
void initState() {
    super.initState();
    loadMapsIndoors("YOUR_MAPSINDOORS_API_KEY_HERE").then((error) {
      // if no error occured during loading, then we can start using the SDK
      if (error == null) {
        // do stuff like fetching locations
      }
    });
}
```

If you are not a customer you can use this demo MapsIndoors API key `d876ff0e60bb430b8fabb145`.

### Initialize MapsIndoorsWidget

We now want to add all the data we get by initializing `MapsIndoors` to our map. This is done by initializing [`MapsIndoorsWidget`](https://pub.dev/documentation/mapsindoors/latest/mapsindoors/MapsIndoorsWidget-class.html) onto the map. `MapsIndoorsWidget` is used as a layer between the map and MapsIndoors.

First add the `MapsIndoorsWidget` to the build hierarchy, in this example it is placed in the body of a `Scaffold`, but it can be placed anywhere, just ensure there is enough space to use the map comfortably.

Then create a `onMapControlReady` method to handle the callback from initializing `MapsIndoorsWidget`:


```dart
class _MapState extends State<Map> {
  late final MapsIndoorsWidget _mapControl;

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      ...
      resizeToAvoidBottomInset: false,
      appBar: AppBar(..),
      // add a drawer that can display search results
      drawer: Drawer(...),
      body: Center(
        child: Column(
          mainAxisAlignment: MainAxisAlignment.start,
          children: <Widget>[
            _mapControl = MapsIndoorsWidget(
              readyListener: onMapControlReady,
            ),
          ],
        ),
      ),
    );
  }

  void onMapControlReady(MPError? error) async {
    if (error == null) {
      // move the camera to the default venue, which has been fetched from MapsIndoors
      _mapControl.goTo(await getDefaultVenue());
    } else {
      // if loading mapcontrol failed inform the user
    }
  }
}
```

Expected result:
//MADHTODO
<img src="/img/getting-started/android_map_gif.gif" alt="An animation showing the desired behaviour of this tutorial" width="350"/>

See the full example of MapsActivity here: [MapsActivity.java](https://github.com/MapsPeople/MapsIndoors-Android-Examples/tree/main/Google_Maps/mapsindoorsgettingstartedjava) or [MapsActivity.kt](https://github.com/MapsPeople/MapsIndoors-Android-Examples/tree/main/Google_Maps/mapsindoorsgettingstartedkotlin)
